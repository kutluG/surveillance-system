{
    "name": "Surveillance System",
    "image": "mcr.microsoft.com/devcontainers/universal:2-ubuntu",    "features": {
        "docker-in-docker": "latest",
        "ghcr.io/devcontainers/features/python:1": {
            "version": "3.11"
        },
        "ghcr.io/devcontainers/features/node:1": {
            "version": "18"
        }
    },
    "containerUser": "vscode",
    "runArgs": ["--privileged"],
    "postCreateCommand": "bash codespace-setup.sh",
    "forwardPorts": [
        8000,
        3000,
        9090,
        8001,
        8002,
        8003,
        8004,
        8005,
        8006,
        8007
    ],
    "portsAttributes": {
        "8000": {
            "label": "API Gateway",
            "onAutoForward": "notify"
        },
        "3000": {
            "label": "Grafana",
            "onAutoForward": "silent"
        },
        "9090": {
            "label": "Prometheus",
            "onAutoForward": "silent"
        }
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.black-formatter",
                "ms-python.flake8",
                "ms-python.mypy-type-checker",
                "ms-azuretools.vscode-docker",
                "redhat.vscode-yaml",
                "ms-vscode.vscode-json",
                "GitHub.copilot",
                "ms-python.pytest"
            ],
            "settings": {
                "python.defaultInterpreterPath": "/usr/local/python/current/bin/python",
                "python.formatting.provider": "black",
                "python.linting.enabled": true,
                "python.linting.flake8Enabled": true,
                "python.testing.pytestEnabled": true,
                "docker.showStartPage": false,
                "files.associations": {
                    "*.dockerfile": "dockerfile",
                    "docker-compose*.yml": "dockercompose"
                }
            }
        }
    },
    "containerEnv": {
        "PYTHONPATH": "/workspaces/surveillance-system",
        "ENVIRONMENT": "development"
    },
    "mounts": [
        "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
    ]
}
